<!doctype html>
<html lang="de">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Photo — Gallery</title>
<link rel="stylesheet" href="../style.css">
</head>

<body>

<header>
<a class="logo" href="../index.html">Dein Name</a>

<nav>
<a href="../fotografie/">Photo</a>
<a href="../design/index.html">Design</a>
<a href="../texte/index.html">Texte</a>
</nav>
</header>


<main class="container">

<div class="page-top">

<h1 class="page-title">Photo</h1>

<div class="subnav">
<a class="active" href="./">Gallery</a>
<a href="./series/index.html">Series</a>
</div>

</div>


<section class="gallery">


<button class="shot" type="button"
  data-src="../images/fotografie/gallery/oranges.jpg"
  data-caption="Series name, location, year">
  <img src="../images/fotografie/gallery/oranges.jpg" alt="">
</button>

<button class="shot" type="button"
  data-src="../images/fotografie/gallery/trash.jpg"
  data-caption="Series name, location, year">
  <img src="../images/fotografie/gallery/trash.jpg" alt="">
</button>

<button class="shot" type="button"
  data-src="../images/fotografie/gallery/nepal.jpg"
  data-caption="Series name, location, year">
  <img src="../images/fotografie/gallery/nepal.jpg" alt="">
</button>

  <button class="shot" type="button"
  data-src="../images/fotografie/gallery/market.jpg"
  data-caption="Series name, location, year">
  <img src="../images/fotografie/gallery/market.jpg" alt="">
</button>

  <button class="shot" type="button"
  data-src="../images/fotografie/gallery/baskets.jpg"
  data-caption="Series name, location, year">
  <img src="../images/fotografie/gallery/baskets.jpg" alt="">
</button>

  <button class="shot" type="button"
  data-src="../images/fotografie/gallery/barber.jpg"
  data-caption="Series name, location, year">
  <img src="../images/fotografie/gallery/barber.jpg" alt="">
</button>


</section>

</main>



<div class="lightbox" id="lightbox">

  <div class="lightbox-backdrop" onclick="closeLightbox()"></div>

  <button class="lb-arrow lb-prev" type="button" aria-label="Vorheriges Foto" onclick="prevPhoto()">‹</button>
  <button class="lb-arrow lb-next" type="button" aria-label="Nächstes Foto" onclick="nextPhoto()">›</button>

  <div class="lightbox-panel">
    <button class="lightbox-close" type="button" onclick="closeLightbox()" aria-label="Schließen">✕</button>
    <img id="lightbox-img" alt="">
    <p id="lightbox-caption"></p>
  </div>

</div>




<script>
  const shots = Array.from(document.querySelectorAll(".shot"));
  const lightbox = document.getElementById("lightbox");
  const lightboxImg = document.getElementById("lightbox-img");
  const lightboxCaption = document.getElementById("lightbox-caption");

  let currentIndex = -1;

  function openAt(index) {
    currentIndex = index;
    const shot = shots[currentIndex];
    lightbox.style.display = "block";
    lightboxImg.src = shot.dataset.src;
    lightboxCaption.innerText = shot.dataset.caption || "";
  }

  function closeLightbox() {
    lightbox.style.display = "none";
    lightboxImg.src = "";
    lightboxCaption.innerText = "";
    currentIndex = -1;
  }

  function next() {
    if (shots.length === 0) return;
    const i = (currentIndex + 1) % shots.length;
    openAt(i);
  }

  function prev() {
    if (shots.length === 0) return;
    const i = (currentIndex - 1 + shots.length) % shots.length;
    openAt(i);
  }

  shots.forEach((shot, index) => {
    shot.addEventListener("click", () => openAt(index));
  });

  // Klick außerhalb = schließen (dein Backdrop muss onclick haben oder wir fangen es hier ab)
  lightbox.addEventListener("click", (e) => {
    // Klick auf Hintergrund schließt
    if (e.target.classList.contains("lightbox") || e.target.classList.contains("lightbox-backdrop")) {
      closeLightbox();
    }
  });

  // Tastatur
  document.addEventListener("keydown", (e) => {
    if (lightbox.style.display !== "block") return;

    if (e.key === "Escape") closeLightbox();
    if (e.key === "ArrowRight") next();
    if (e.key === "ArrowLeft") prev();
  });

  // Optional: Klick links/rechts auf Foto = prev/next
  lightboxImg.addEventListener("click", (e) => {
    const x = e.clientX;
    const mid = window.innerWidth / 2;
    if (x > mid) next();
    else prev();
  });

  // Damit dein X Button funktioniert:
  window.closeLightbox = closeLightbox;

  window.nextPhoto = next;
window.prevPhoto = prev;

</script>
